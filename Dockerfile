FROM ubuntu:rolling

################################################################################
#  Copy relevant files over  ---------------------------------------------------
################################################################################
COPY ["bin", "/root/.local/bin"]
COPY ["init_scripts", "/root/init_scripts"]
COPY ["init.sh", "/root"]

################################################################################
#  Install programs + cleanup afterwards  --------------------------------------
################################################################################
WORKDIR /root
RUN chmod -R +x ./init_scripts

RUN \
  ./init.sh && \
  rm -rf ./init_scripts && \
  rm -rf ./init.sh

################################################################################
#  Start in provided host directory and run TMUX -------------------------------
################################################################################
WORKDIR /root/host
ENTRYPOINT ["tmux", "-u"]
